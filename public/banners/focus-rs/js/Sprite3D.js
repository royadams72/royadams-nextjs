"use strict";var Sprite3D=Sprite3D||{isSupported:function(){return this._isInit||this._init(),this._isSupported},stage:function(t){this._isInit||this._init();var i,s;return t?(i=t,s=t.style,"static"===s.position&&(s.position="relative")):(i=document.createElement("div"),s=i.style,s[this._browserPrefix+"PerspectiveOrigin"]="0 0",s[this._browserPrefix+"TransformOrigin"]="0 0",s.position="absolute",s.top="50%",s.left="50%",s.margin="0px",s.padding="0px",document.body.appendChild(i)),s[this._browserPrefix+"Perspective"]="800px",s[this._browserPrefix+"Transform"]="translateZ(0px)",i=this.create(i),s[this._browserPrefix+"TransformStyle"]="flat",i},create:function(t){if(this._isInit||this._init(),0===arguments.length)t=document.createElement("div"),t.style.margin="0px",t.style.padding="0px",t.style.position="absolute";else if("string"==typeof t){var i=t;t=document.createElement("div"),t.style.margin="0px",t.style.padding="0px",t.style.position="absolute",this._handleStringArgument(t,i)}else"static"==t.style.position&&(t.style.position="relative");t.style[this._browserPrefix+"TransformStyle"]="preserve-3d",t.style[this._transformProperty]="translateZ(0px)";for(var s in this._props)this._props.hasOwnProperty(s)&&(t[s]=this._props[s]);return t._string=["translate3d(",0,"px,",0,"px,",0,"px) ","rotateX(",0,"deg) ","rotateY(",0,"deg) ","rotateZ(",0,"deg) ","scale3d(",1,", ",1,", ",1,") "],t._positions=[1,3,5,8,11,14,17,19,21],t._ox=0,t._oy=0,t._oz=0,t},box:function(t,i,s,e){this._isInit||this._init();var n=this.create();1===arguments.length?(i=t,s=t):2===arguments.length&&"string"==typeof arguments[1]?(this._handleStringArgument(n,arguments[1]),i=t,s=t):e&&"string"==typeof e&&this._handleStringArgument(n,e);var r=.5*t,o=.5*i,h=.5*s;return n.appendChild(Sprite3D.create(".front").position(-r,-o,h).size(t,i).update()),n.appendChild(Sprite3D.create(".back").position(-r,-o,-h).size(t,i).rotationY(180).update()),n.appendChild(Sprite3D.create(".left").position(-r-h,-o,0).size(s,i).rotationY(-90).update()),n.appendChild(Sprite3D.create(".right").position(r-h,-o,0).size(s,i).rotationY(90).update()),n.appendChild(Sprite3D.create(".bottom").position(-r,o-h,0).size(t,s).rotationX(-90).update()),n.appendChild(Sprite3D.create(".top").position(-r,-o-h,0).size(t,s).rotationX(90).update()),n},prefix:function(t){return Sprite3D._browserPrefix+t},_isInit:!1,_isSupported:!1,_browserPrefix:"webkit",_transformProperty:"webkitTransform",_init:function(){var t,i=document.createElement("div"),s=["","webkit","Moz","O","ms"],e=s.length;for(Sprite3D._isInit=!0,t=0;e>t;t++)if(s[t]+"Perspective"in i.style)return Sprite3D._transformProperty=s[t]+"Transform",Sprite3D._isSupported=!0,Sprite3D._browserPrefix=s[t],2==t&&(Sprite3D._props.update=Sprite3D._props.updateJoin),!0;return alert("Sorry, but your browser does not support CSS 3D transfroms."),!1},_handleStringArgument:function(t,i){switch(i[0]){case".":t.className=i.substr(1);break;case"#":t.id=i.substr(1);break;default:t.id=i}},_props:{x:function(t){return arguments.length?(this._string[this._positions[0]]=t-this._ox,this):this._string[this._positions[0]]+this._ox},y:function(t){return arguments.length?(this._string[this._positions[1]]=t-this._oy,this):this._string[this._positions[1]]+this._oy},z:function(t){return arguments.length?(this._string[this._positions[2]]=t-this._oz,this):this._string[this._positions[2]]+this._oz},position:function(t,i,s){return this._string[this._positions[0]]=t-this._ox,this._string[this._positions[1]]=i-this._oy,arguments.length>=3&&(this._string[this._positions[2]]=s-this._oz),this},move:function(t,i,s){return this._string[this._positions[0]]+=t,this._string[this._positions[1]]+=i,arguments.length>=3&&(this._string[this._positions[2]]+=s),this},rotationX:function(t){return arguments.length?(this._string[this._positions[3]]=t,this):this._string[this._positions[3]]},rotationY:function(t){return arguments.length?(this._string[this._positions[4]]=t,this):this._string[this._positions[4]]},rotationZ:function(t){return arguments.length?(this._string[this._positions[5]]=t,this):this._string[this._positions[5]]},rotation:function(t,i,s){return this._string[this._positions[3]]=t,this._string[this._positions[4]]=i,this._string[this._positions[5]]=s,this},rotate:function(t,i,s){return this._string[this._positions[3]]+=t,this._string[this._positions[4]]+=i,this._string[this._positions[5]]+=s,this},scaleX:function(t){return arguments.length?(this._string[this._positions[6]]=t,this):this._string[this._positions[6]]},scaleY:function(t){return arguments.length?(this._string[this._positions[7]]=t,this):this._string[this._positions[7]]},scaleZ:function(t){return arguments.length?(this._string[this._positions[8]]=t,this):this._string[this._positions[8]]},scale:function(t,i,s){switch(arguments.length){case 0:return this._string[this._positions[6]];case 1:return this._string[this._positions[6]]=t,this._string[this._positions[7]]=t,this._string[this._positions[8]]=t,this;case 2:return this._string[this._positions[6]]=t,this._string[this._positions[7]]=i,this;case 3:return this._string[this._positions[6]]=t,this._string[this._positions[7]]=i,this._string[this._positions[8]]=s,this}return this},origin:function(t,i,s){if("string"==typeof t){var e=window.getComputedStyle(this,null);console.log(e),console.log("w:"+e.getPropertyValue("width")+" || h: "+e.height)}else arguments.length<3&&(s=0),this._string[this._positions[0]]+=this._ox-t,this._string[this._positions[1]]+=this._oy-i,this._string[this._positions[2]]+=this._oz-s,this._ox=t,this._oy=i,this._oz=s;return this},transformOrigin:function(t,i){return this.style[Sprite3D._browserPrefix+"TransformOrigin"]=(Number(t)?t+"px":t)+" "+(Number(i)?i+"px":i),this},transformString:function(t){var i=t.toLowerCase().split(" "),s=i.length,e=0,n=[],r=[0,0,0,0,0,0,0,0,0],o=0;for(e;s>e;e++)switch(i[e]){case"p":case"position":case"translate":o=n.push("translate3d(",this._string[this._positions[0]],"px,",this._string[this._positions[1]],"px,",this._string[this._positions[2]],"px) "),r[0]=o-6,r[1]=o-4,r[2]=o-2;break;case"rx":case"rotatex":case"rotationx":o=n.push("rotateX(",this._string[this._positions[3]],"deg) "),r[3]=o-2;break;case"ry":case"rotatey":case"rotationy":o=n.push("rotateY(",this._string[this._positions[4]],"deg) "),r[4]=o-2;break;case"rz":case"rotatez":case"rotationz":o=n.push("rotateZ(",this._string[this._positions[5]],"deg) "),r[5]=o-2;break;case"s":case"scale":o=n.push("scale3d(",this._string[this._positions[6]],",",this._string[this._positions[7]],",",this._string[this._positions[8]],") "),r[6]=o-6,r[7]=o-4,r[8]=o-2}return this._string=n,this._positions=r,this},updateJoin:function(){return this.style[Sprite3D._transformProperty]=this._string.join(""),this},update:function(){var t="";return this._string.every(function(i){return t+=i,!0}),this.style[Sprite3D._transformProperty]=t,this},perspective:function(t){switch(arguments.length){case 0:return this.style[Sprite3D._browserPrefix+"Perspective"];case 1:return this.style[Sprite3D._browserPrefix+"Perspective"]="string"==typeof t?t:t+"px",this}},css:function(t,i){switch(arguments.length){case 0:return this.style;case 1:return this.style[t];case 2:return this.style[t]=i,this;case 3:return this.style[Sprite3D._browserPrefix+t]=i,this}},addClass:function(t){return this.classList.add(t),this},removeClass:function(t){return this.classList.remove(t),this},html:function(t){return arguments.length?(this.innerHTML=t,this):this.innerHTML},size:function(t,i){return this.style.width=Number(t)?t+"px":t,this.style.height=Number(i)?i+"px":i,this},bind:function(t){if("object"==typeof t)for(var i in t)this.addEventListener(i,t[i],!1);else 2===arguments.length?this.addEventListener(arguments[0],arguments[1],!1):3===arguments.length&&this.addEventListener(arguments[0],arguments[1],arguments[2]);return this},unbind:function(t){if("object"==typeof t)for(var i in t)this.removeEventListener(i,t[i],!1);else 2===arguments.length&&this.removeEventListener(arguments[0],arguments[1],!1);return this},tileWidth:0,tileHeight:0,tileSize:function(t,i){return this.tileWidth=t,this.tileHeight=i,this},tilePosition:function(t,i){return this.style.backgroundPosition="-"+t*this.tileWidth+"px -"+i*this.tileHeight+"px",this},set:function(t,i){return this[t]=i,this}}};